<!doctype html>
<!--
Copyright 2017 JellyWare Inc. All Rights Reserved.
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="BlueJelly">
    <meta name="viewport" content="width=640, maximum-scale=1.0, user-scalable=yes">
    <title>BlueJelly</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet" type="text/css">
<!--  <link rel="stylesheet" href="style.css">  -->
    <script type="text/javascript" src="bluejelly.js"></script>
  </head>

<body>
<div class="container">
    <div class="title margin">
        <p id="title">BlueJelly Sample</p>
        <p id="subtitle">ConnectとUUID</p>
    </div>

    <div class="contents margin">
        <button id="scan" class="button">Scan</button>
        <button id="connect" class="button">Connect</button>
        <hr>
        <div id="device_name"> </div>
        <div id="uuid_name"> </div>
        <div id="status"> </div>

    </div>
    <div class="footer margin">
        For more information, see <a href="http://jellyware.jp/kurage" target="_blank">jellyware.jp</a> and <a href="https://github.com/electricbaka/bluejelly" target="_blank">GitHub</a> !
    </div>
</div>

<script>
//--------------------------------------------------
//Global変数
//--------------------------------------------------
//BlueJellyのインスタンス生成
var ble = new BlueJelly();
    
const SERVICE_UUID    = '6926486a-34a8-11e9-b210-d663bd873d93';   // サービス
const SWITCH_UUID	  = '692655f8-34a8-11e9-b210-d663bd873d93';   // スイッチ
const ADC_UUID  	  = '69264cd4-34a8-11e9-b210-d663bd873d93';   // A/D値
const RESERVE_IN_UUID = '69264e1e-34a8-11e9-b210-d663bd873d93';   // 予備入力
const MESSAGE_UUID    = '692655f8-34a8-11e9-b210-d663bd873d93';   // メッセージ

const LED1_UUID  	  = '692651b6-34a8-11e9-b210-d663bd873d93';   // LED1
const LED2_UUID  	  = '6926530a-34a8-11e9-b210-d663bd873d93';   // LED2
const RESERVE_OUT  	  = '6926544a-34a8-11e9-b210-d663bd873d93';   // 予備出力   
    
//--------------------------------------------------
//Scan後の処理
//--------------------------------------------------
ble.onScan = function (deviceName) {
  document.getElementById('device_name').innerHTML = deviceName;
  document.getElementById('status').innerHTML = "found device!";
}
    
//--------------------------------------------------
//ConnectGATT後の処理
//--------------------------------------------------
ble.onConnectGATT = function (uuid) {
  console.log('> connected GATT!');

  document.getElementById('uuid_name').innerHTML = uuid;
  document.getElementById('status').innerHTML = "connected GATT!";
}    

//onLoad
window.onload = function(){
    ble.setUUID("SWITCH"    , SERVICE_UUID, SWITCH_UUID);
    ble.setUUID("ADC"       , SERVICE_UUID, ADC_UUID);
    ble.setUUID("RESERVE_IN", SERVICE_UUID, RESERVE_IN_UUID);
    ble.setUUID("MESSAGE"   , SERVICE_UUID, MESSAGE_UUID);
    ble.setUUID("LED1"      , SERVICE_UUID, LED1_UUID);
    ble.setUUID("LED2"      , SERVICE_UUID, LED2_UUID);
    ble.setUUID("RESERVE"   , SERVICE_UUID, RESERVE_OUT);
}

//-------------------------------------------------
//ボタンが押された時のイベント登録
//--------------------------------------------------
document.getElementById('scan').addEventListener('click', function() {
      ble.scan('SWITCH');
});

document.getElementById('connect').addEventListener('click', function(){
      ble.connectGATT('SWITCH');
});
    
    
</script>

</body>
</html>
 
</script>    
</body>
</html>
